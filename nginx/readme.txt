This proxy server config is loosely inspired from https://realpython.com/django-development-with-docker-compose-and-machine/


The directory structure looks like following -

1. Dockerfile
2. sites-enabled
    - service_mbs (This is for backend service, you will certainly have something else)


Dockerfile - This runs on tutum/nginx base image. This may change in future! We copy content from /sites-enabled to the image.
docker-compose.yml/nginx(service)-
 - Here we are exposing 80 and 4xx port.
 - 2 volumes are created, that is because the data from letsencrypt has to be persisted across container runs.

service_mbs (config)
 - Two server scopes
   - server to handle 80
   - server to handle 443
- When creating server for the first time, the second server (443) shall be commeneted else nginx will crash (relevant files (specifically the include) will not be present initially and is generated by letsencrypt.


How to enable SSL?
1. Create container nginx container first time without second server.
2. SSH inside this contiainer and run sudo certbot --nginx
That;s it!
More info here  - https://certbot.eff.org/lets-encrypt/ubuntutrusty-nginx

- When creating server for the first time, the second server (443) shall be commeneted else nginx will crash (relevant files (specifically the include) will not be present initially and is generated by letsencrypt.


How to enable SSL?
1. Create container nginx container first time without second server.
2. SSH inside this contiainer and run sudo certbot --nginx
That;s it!
More info here  - https://certbot.eff.org/lets-encrypt/ubuntutrusty-nginx


- When creating server for the first time, the second server (443) shall be commeneted else nginx will crash (relevant files (specifically the include) will not be present initially and is generated by letsencrypt.


How to enable SSL?
1. Create container nginx container first time without second server.
2. SSH inside this contiainer and run sudo certbot --nginx
That;s it!
More info here  - https://certbot.eff.org/lets-encrypt/ubuntutrusty-nginx


- When creating server for the first time, the second server (443) shall be commeneted else nginx will crash (relevant files (specifically the include) will not be present initially and is generated by letsencrypt.


How to enable SSL?
1. Create container nginx container first time without second server.
2. SSH inside this contiainer and run sudo certbot --nginx
That;s it!
More info here  - https://certbot.eff.org/lets-encrypt/ubuntutrusty-nginx
3. After that, uncomment second server and push to container again and you are good to go. 

  
